<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Copy AutoTouch Script</title>
  <style>
    body {
      font-family: monospace;
      background: #f5f5f5;
      padding: 40px;
    }
    textarea {
      width: 100%;
      height: 450px;
      padding: 15px;
      font-size: 14px;
      border: 1px solid #ccc;
      border-radius: 5px;
      resize: vertical;
      box-sizing: border-box;
      background: #fdfdfd;
    }
    .button {
      margin: 10px 0;
      padding: 10px 20px;
      font-size: 14px;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      text-decoration: none;
      display: inline-block;
    }
    .button:hover {
      background: #0056b3;
    }
  </style>
</head>
<body>
  <!-- üîó ·∫§N t·∫°o update.lua -->
  <a href="http://192.168.140.102:8080/file/new?path=%2F%2Fupdate.lua" class="button" target="_blank">
    üîó ·∫§n t·∫°o
  </a>
  <textarea id="code" readonly>
local curl = require("cURL")
local zipUrl = "https://kieunhutrung1.github.io/tmp/touch/update.zip"
local zipPath = rootDir() .. "/update.zip"
local extractTo = rootDir()  -- Gi·∫£i n√©n ngay t·∫°i th∆∞ m·ª•c root
function downloadZip(url, savePath)
    local file = io.open(savePath, "wb")
    if not file then
        toast("‚ùå Kh√¥ng th·ªÉ t·∫°o file!", 5)
        return false
    end
    local c = curl.easy{
        url = url,
        writefunction = function(chunk)
            file:write(chunk)
            return #chunk
        end
    }
    c:setopt(curl.OPT_SSL_VERIFYPEER, false)
    c:setopt(curl.OPT_FOLLOWLOCATION, 1)
    c:setopt(curl.OPT_TIMEOUT, 20)
    local ok, err = pcall(function()
        c:perform()
    end)
    c:close()
    file:close()
    if ok then
        toast("‚úÖ T·∫£i th√†nh c√¥ng!", 2)
        return true
    else
        toast("‚ùå L·ªói khi t·∫£i: " .. tostring(err), 5)
        return false
    end
end
function unzipFile(zipFile, toFolder)
    local cmd = string.format('unzip -o "%s" -d "%s"', zipFile, toFolder)
    local result = execute(cmd)
    toast("‚úÖ Gi·∫£i n√©n th√†nh c√¥ng!", 3)
end
if downloadZip(zipUrl, zipPath) then
    unzipFile(zipPath, extractTo)
end
  </textarea>
  <button class="button" onclick="copyCode()">üìã Copy</button>

  <script>
    function copyCode() {
      const textArea = document.getElementById("code");
      textArea.select();
      document.execCommand("copy");
    }
  </script>
</body>
</html>
