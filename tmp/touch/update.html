<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Copy AutoTouch Script</title>
  <style>
    body {
      font-family: monospace;
      background: #f5f5f5;
      padding: 40px;
    }
    textarea {
      width: 100%;
      height: 450px;
      padding: 15px;
      font-size: 14px;
      border: 1px solid #ccc;
      border-radius: 5px;
      resize: vertical;
      box-sizing: border-box;
      background: #fdfdfd;
    }
    .button {
      margin: 10px 0;
      padding: 10px 20px;
      font-size: 14px;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      text-decoration: none;
      display: inline-block;
    }
    .button:hover {
      background: #0056b3;
    }
  </style>
</head>
<body>
  <!-- ğŸ”— áº¤N táº¡o update.lua -->
  <a href="http://127.0.0.1:8080/file/new?path=%2F%2Fupdate.lua" class="button" target="_blank">
    ğŸ”— áº¤n táº¡o
  </a>
  <textarea id="code" readonly>
local url = "https://kieunhutrung1.github.io/tmp/touch/update.zip"
local zipPath = rootDir() .. "/update.zip"
local extractTo = rootDir()
-- ğŸ§¾ HÃ m kiá»ƒm tra file tá»“n táº¡i
function fileExists(filePath)
  local f = io.open(filePath, "r")
  if f then f:close() return true else return false end
end
-- ğŸ“¥ Táº£i file báº±ng curl
toast("â¬‡ï¸ Äang táº£i file...")
local cmd = string.format('curl -k -L "%s" -o "%s"', url, zipPath)
execute(cmd)
-- âœ… Kiá»ƒm tra
if fileExists(zipPath) then
  toast("âœ… Táº£i thÃ nh cÃ´ng!", 2)
  -- ğŸ“¦ Giáº£i nÃ©n náº¿u file tá»“n táº¡i
  toast("ğŸ—‚ï¸ Äang giáº£i nÃ©n...")
  local unzipCmd = string.format('unzip -o "%s" -d "%s"', zipPath, extractTo)
  execute(unzipCmd)
  toast("âœ… Giáº£i nÃ©n xong!", 2)
else
  toast("âŒ KhÃ´ng tÃ¬m tháº¥y file sau khi táº£i!", 5)
end
  </textarea>
  <button class="button" onclick="copyCode()">ğŸ“‹ Copy</button>

  <script>
    function copyCode() {
      const textArea = document.getElementById("code");
      textArea.select();
      document.execCommand("copy");
    }
  </script>
</body>
</html>
